# 运行时

![Untitled](%E8%BF%90%E8%A1%8C%E6%97%B6%20e86e0999f74645d590adcded037d5e09/Untitled.png)

Oasis Core 独立的运行时能够调度和执行有状态的计算并将结果摘要提交到共识层。 除了验证和存储规范运行时状态摘要之外，共识层还充当节点和运行时元数据的注册表、选举运行时计算委员会的调度器和密钥管理器复制的协调器。

## 运行时

运行时实际上是具有共享状态的复制应用程序。 应用程序可以接收来自客户端的事务，并基于这些事务执行任意状态突变。 这种复制的状态和应用程序逻辑与共识层状态和逻辑完全分开存在，但它利用相同的共识层来实现最终性，共识层提供规范状态的来源。 多个运行时可以共享同一个共识层。

在 Oasis Core 中，运行时可以是任何执行运行时主机协议的可执行文件，该协议用于在运行时和 Oasis 核心节点之间进行通信。 可执行文件通常在沙盒环境中运行，唯一的外部接口是运行时主机协议。 执行环境目前包括一个基于 Linux 命名空间的沙箱和 SECCOMP，可选地与英特尔 SGX 飞地相结合以进行机密计算。

[data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIzODFweCIgaGVpZ2h0PSIxNjFweCIgdmlld0JveD0iLTAuNSAtMC41IDM4MSAxNjEiIGNvbnRlbnQ9IiZsdDtteGZpbGUgaG9zdD0mcXVvdDthcHAuZGlhZ3JhbXMubmV0JnF1b3Q7IG1vZGlmaWVkPSZxdW90OzIwMjAtMDctMjBUMjI6MDM6NTIuNjAzWiZxdW90OyBhZ2VudD0mcXVvdDs1LjAgKE1hY2ludG9zaDsgSW50ZWwgTWFjIE9TIFggMTBfMTRfNikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzg0LjAuNDE0Ny44OSBTYWZhcmkvNTM3LjM2JnF1b3Q7IGV0YWc9JnF1b3Q7anZjbC1DYkd2THY0c3JRQmhkRjcmcXVvdDsgdmVyc2lvbj0mcXVvdDsxMy40LjkmcXVvdDsgdHlwZT0mcXVvdDtkZXZpY2UmcXVvdDsmZ3Q7Jmx0O2RpYWdyYW0gaWQ9JnF1b3Q7REpYWk9tNWJmMmRqOFNFSVE4Sl8mcXVvdDsgbmFtZT0mcXVvdDtQYWdlLTEmcXVvdDsmZ3Q7N1pmTGNwc3dGSWFmeGpQdEloMHU1dEpsZkVuU1R0cVoxcDFwMHAyTURxQkVTSzRRQWZmcEs5bkNnQ0ZPTWdsZGRXTnpmdDIvLzNCc1RkeDVWbDBLdEVtL2NBeDA0bGk0bXJpTGllUFlkdWlyTDYxczkwb1F1SHNoRVFTYlRvMndJbi9BaUpaUkM0SWg3M1NVbkZOSk5sMHg0b3hCSkRzYUVvS1gzVzR4cDkxVk55aUJuckNLRU8yclB3bVc2VjROUGF2UnI0QWthYjJ5YlptV0ROV2RqWkNuQ1BPeUpibkxpVHNYbk12OVUxYk5nV3A0TlpmOXVJdEhXZzhiRThEa2N3YUVpK25zbnBibDR0ZnRqODkwL3UyT2lPVE16UEtBYUdFTy9GVlpPSEY4cXVhY3JZWGV0OXdhR1A3dlFtOTJGbk1tei9LZFZlZXFnKzFzcXFaUlBTWDYrOTMzZ2ttU3FibXNLNTdMOXdiQ1lUSkg4SUpoMEp1elZmY3lKUkpXR3hUcDFsTGxrdEpTbVZIVHJKYzB5V0U3T2lhVXpqbmxZamVYRzhleEUwVkt6NlhnOTlCcXdmN2E5L3pkdm81eDFXY0hJYUZxU1FiZkpmQU1wTmlxTHFiVk5VNmFWTFlkYngrWFRXTFl0ZHRwS3lsOG95R1RpOGxoNXNZdTlXQWNlNEY3VHMrOUU1U3QxMU1PSXhpbXZBNjlxYWNYd0NoUEQ1NitBWExINmpLdlViYVFIMHBGRzdrOUhZdTUyMk8rUWd5dmVkVkRyNDRvdTN5NzNCaG5jQVRaU0lpU2hLa3dVdUJBNlRNTmpLaWlkRzRhTW9LeFhtYlEwSzdsSFVkNkJ1dlk3SGlnb0x6YXJ1a3o3WExHY212YWM2c3BTOWNjWVVWMzFEZm1uOVNsQTlMNk43WlAzZjQ0UU4wZGk3bzNjbDNxNW5RWE9kallnMkFJK1VjL2NORkl5QTkxL3lubXdWak0vUjd6VDZwNDZHR3J5eHYxdVdRUlJRL3d2MG9ObUdjOTA3elJ5bFJ3b2t6TkNFTm1pYkhLRkVZUXhvTmx5bzlDV01kdjlNNDRSOWpkQWV6QkFIWnZMT3hoanlwZzllL2ZoRnpJbENlY0licHMxS084YmZwY2M3NHh0TzlBeXEzQmpRckp1MTVBUmVSTjYvbFdUL1hCTTlHaU1qUHZnbTBkTUhYY20zYlFHcVhEWnRndXFzY2QrNTVMSk9TNXZoYnA5NWFpUENkUkxWOFFXbS94VWJOelhvZ0lUaEN0cjJoSUpDQ2ZUbmlOKzJUcUNLQklrb2Z1WmV3RmVhREM1b2ExYTJ2ZFU5M2xYdz09Jmx0Oy9kaWFncmFtJmd0OyZsdDsvbXhmaWxlJmd0OyI+PGRlZnMvPjxnPjxyZWN0IHg9IjAiIHk9Ijg1IiB3aWR0aD0iMTIwIiBoZWlnaHQ9IjYwIiByeD0iOSIgcnk9IjkiIGZpbGw9IiNmZmYyY2MiIHN0cm9rZT0iI2Q2YjY1NiIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyIgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxMThweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAxMTVweDsgbWFyZ2luLWxlZnQ6IDFweDsiPjxkaXYgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMDsgdGV4dC1hbGlnbjogY2VudGVyOyAiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogIzAwMDAwMDsgbGluZS1oZWlnaHQ6IDEuMjsgcG9pbnRlci1ldmVudHM6IGFsbDsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgd29yZC13cmFwOiBub3JtYWw7ICI+Tm9kZTxiciBzdHlsZT0iZm9udC1zaXplOiAxMnB4IiAvPihSdW50aW1lIEhvc3QpPC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjYwIiB5PSIxMTkiIGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iMTJweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+Tm9kZS4uLjwvdGV4dD48L3N3aXRjaD48L2c+PHJlY3QgeD0iMTcwIiB5PSIyMCIgd2lkdGg9IjIxMCIgaGVpZ2h0PSIxNDAiIGZpbGw9IiNmOGNlY2MiIHN0cm9rZT0iI2I4NTQ1MCIgc3Ryb2tlLWRhc2hhcnJheT0iMyAzIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PHJlY3QgeD0iMTcwIiB5PSIwIiB3aWR0aD0iMjEwIiBoZWlnaHQ9IjIwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiIHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogMjA4cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogMTBweDsgbWFyZ2luLWxlZnQ6IDE3MXB4OyI+PGRpdiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7ICI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiAjMDAwMDAwOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyBmb250LXdlaWdodDogYm9sZDsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgd29yZC13cmFwOiBub3JtYWw7ICI+U2FuZGJveDwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIyNzUiIHk9IjE0IiBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEycHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtd2VpZ2h0PSJib2xkIj5TYW5kYm94PC90ZXh0Pjwvc3dpdGNoPjwvZz48cmVjdCB4PSIxODAiIHk9IjMwIiB3aWR0aD0iMTkwIiBoZWlnaHQ9IjMwIiBmaWxsPSIjZmZmMmNjIiBzdHJva2U9IiNkNmI2NTYiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiIHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogMTg4cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogNDVweDsgbWFyZ2luLWxlZnQ6IDE4MXB4OyI+PGRpdiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7ICI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiAjMDAwMDAwOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyB3b3JkLXdyYXA6IG5vcm1hbDsgIj5SdW50aW1lIExvYWRlcjwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIyNzUiIHk9IjQ5IiBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEycHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlJ1bnRpbWUgTG9hZGVyPC90ZXh0Pjwvc3dpdGNoPjwvZz48cmVjdCB4PSIxODAiIHk9IjgwIiB3aWR0aD0iMTkwIiBoZWlnaHQ9IjcwIiBmaWxsPSIjZTFkNWU3IiBzdHJva2U9IiM5NjczYTYiIHN0cm9rZS1kYXNoYXJyYXk9IjMgMyIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxyZWN0IHg9IjE4MCIgeT0iNjAiIHdpZHRoPSIxOTAiIGhlaWdodD0iMjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyIgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxODhweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiA3MHB4OyBtYXJnaW4tbGVmdDogMTgxcHg7Ij48ZGl2IHN0eWxlPSJib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LXNpemU6IDA7IHRleHQtYWxpZ246IGNlbnRlcjsgIj48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6IEhlbHZldGljYTsgY29sb3I6ICMwMDAwMDA7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBhbGw7IGZvbnQtd2VpZ2h0OiBib2xkOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyB3b3JkLXdyYXA6IG5vcm1hbDsgIj5JbnRlbCBTR1ggRW5jbGF2ZTwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIyNzUiIHk9Ijc0IiBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEycHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtd2VpZ2h0PSJib2xkIj5JbnRlbCBTR1ggRW5jbGF2ZTwvdGV4dD48L3N3aXRjaD48L2c+PHJlY3QgeD0iMTkwIiB5PSI5MCIgd2lkdGg9IjE3MCIgaGVpZ2h0PSI1MCIgZmlsbD0iI2RhZThmYyIgc3Ryb2tlPSIjNmM4ZWJmIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7IiBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGNlbnRlcjsgd2lkdGg6IDE2OHB4OyBoZWlnaHQ6IDFweDsgcGFkZGluZy10b3A6IDExNXB4OyBtYXJnaW4tbGVmdDogMTkxcHg7Ij48ZGl2IHN0eWxlPSJib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LXNpemU6IDA7IHRleHQtYWxpZ246IGNlbnRlcjsgIj48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6IEhlbHZldGljYTsgY29sb3I6ICMwMDAwMDA7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBhbGw7IHdoaXRlLXNwYWNlOiBub3JtYWw7IHdvcmQtd3JhcDogbm9ybWFsOyAiPlJ1bnRpbWUgQmluYXJ5PC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjI3NSIgeT0iMTE5IiBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEycHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlJ1bnRpbWUgQmluYXJ5PC90ZXh0Pjwvc3dpdGNoPjwvZz48cGF0aCBkPSJNIDEyNi4zNyAxMTUgTCAxODMuNjMgMTE1IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9InN0cm9rZSIvPjxwYXRoIGQ9Ik0gMTIxLjEyIDExNSBMIDEyOC4xMiAxMTEuNSBMIDEyNi4zNyAxMTUgTCAxMjguMTIgMTE4LjUgWiIgZmlsbD0iIzAwMDAwMCIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cGF0aCBkPSJNIDE4OC44OCAxMTUgTCAxODEuODggMTE4LjUgTCAxODMuNjMgMTE1IEwgMTgxLjg4IDExMS41IFoiIGZpbGw9IiMwMDAwMDAiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PC9nPjxzd2l0Y2g+PGcgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ii8+PGEgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwtNSkiIHhsaW5rOmhyZWY9Imh0dHBzOi8vZGVzay5kcmF3LmlvL3N1cHBvcnQvc29sdXRpb25zL2FydGljbGVzLzE2MDAwMDQyNDg3IiB0YXJnZXQ9Il9ibGFuayI+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMHB4IiB4PSI1MCUiIHk9IjEwMCUiPlZpZXdlciBkb2VzIG5vdCBzdXBwb3J0IGZ1bGwgU1ZHIDEuMTwvdGV4dD48L2E+PC9zd2l0Y2g+PC9zdmc+](data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIzODFweCIgaGVpZ2h0PSIxNjFweCIgdmlld0JveD0iLTAuNSAtMC41IDM4MSAxNjEiIGNvbnRlbnQ9IiZsdDtteGZpbGUgaG9zdD0mcXVvdDthcHAuZGlhZ3JhbXMubmV0JnF1b3Q7IG1vZGlmaWVkPSZxdW90OzIwMjAtMDctMjBUMjI6MDM6NTIuNjAzWiZxdW90OyBhZ2VudD0mcXVvdDs1LjAgKE1hY2ludG9zaDsgSW50ZWwgTWFjIE9TIFggMTBfMTRfNikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzg0LjAuNDE0Ny44OSBTYWZhcmkvNTM3LjM2JnF1b3Q7IGV0YWc9JnF1b3Q7anZjbC1DYkd2THY0c3JRQmhkRjcmcXVvdDsgdmVyc2lvbj0mcXVvdDsxMy40LjkmcXVvdDsgdHlwZT0mcXVvdDtkZXZpY2UmcXVvdDsmZ3Q7Jmx0O2RpYWdyYW0gaWQ9JnF1b3Q7REpYWk9tNWJmMmRqOFNFSVE4Sl8mcXVvdDsgbmFtZT0mcXVvdDtQYWdlLTEmcXVvdDsmZ3Q7N1pmTGNwc3dGSWFmeGpQdEloMHU1dEpsZkVuU1R0cVoxcDFwMHAyTURxQkVTSzRRQWZmcEs5bkNnQ0ZPTWdsZGRXTnpmdDIvLzNCc1RkeDVWbDBLdEVtL2NBeDA0bGk0bXJpTGllUFlkdWlyTDYxczkwb1F1SHNoRVFTYlRvMndJbi9BaUpaUkM0SWg3M1NVbkZOSk5sMHg0b3hCSkRzYUVvS1gzVzR4cDkxVk55aUJuckNLRU8yclB3bVc2VjROUGF2UnI0QWthYjJ5YlptV0ROV2RqWkNuQ1BPeUpibkxpVHNYbk12OVUxYk5nV3A0TlpmOXVJdEhXZzhiRThEa2N3YUVpK25zbnBibDR0ZnRqODkwL3UyT2lPVE16UEtBYUdFTy9GVlpPSEY4cXVhY3JZWGV0OXdhR1A3dlFtOTJGbk1tei9LZFZlZXFnKzFzcXFaUlBTWDYrOTMzZ2ttU3FibXNLNTdMOXdiQ1lUSkg4SUpoMEp1elZmY3lKUkpXR3hUcDFsTGxrdEpTbVZIVHJKYzB5V0U3T2lhVXpqbmxZamVYRzhleEUwVkt6NlhnOTlCcXdmN2E5L3pkdm81eDFXY0hJYUZxU1FiZkpmQU1wTmlxTHFiVk5VNmFWTFlkYngrWFRXTFl0ZHRwS3lsOG95R1RpOGxoNXNZdTlXQWNlNEY3VHMrOUU1U3QxMU1PSXhpbXZBNjlxYWNYd0NoUEQ1NitBWExINmpLdlViYVFIMHBGRzdrOUhZdTUyMk8rUWd5dmVkVkRyNDRvdTN5NzNCaG5jQVRaU0lpU2hLa3dVdUJBNlRNTmpLaWlkRzRhTW9LeFhtYlEwSzdsSFVkNkJ1dlk3SGlnb0x6YXJ1a3o3WExHY212YWM2c3BTOWNjWVVWMzFEZm1uOVNsQTlMNk43WlAzZjQ0UU4wZGk3bzNjbDNxNW5RWE9kallnMkFJK1VjL2NORkl5QTkxL3lubXdWak0vUjd6VDZwNDZHR3J5eHYxdVdRUlJRL3d2MG9ObUdjOTA3elJ5bFJ3b2t6TkNFTm1pYkhLRkVZUXhvTmx5bzlDV01kdjlNNDRSOWpkQWV6QkFIWnZMT3hoanlwZzllL2ZoRnpJbENlY0licHMxS084YmZwY2M3NHh0TzlBeXEzQmpRckp1MTVBUmVSTjYvbFdUL1hCTTlHaU1qUHZnbTBkTUhYY20zYlFHcVhEWnRndXFzY2QrNTVMSk9TNXZoYnA5NWFpUENkUkxWOFFXbS94VWJOelhvZ0lUaEN0cjJoSUpDQ2ZUbmlOKzJUcUNLQklrb2Z1WmV3RmVhREM1b2ExYTJ2ZFU5M2xYdz09Jmx0Oy9kaWFncmFtJmd0OyZsdDsvbXhmaWxlJmd0OyI+PGRlZnMvPjxnPjxyZWN0IHg9IjAiIHk9Ijg1IiB3aWR0aD0iMTIwIiBoZWlnaHQ9IjYwIiByeD0iOSIgcnk9IjkiIGZpbGw9IiNmZmYyY2MiIHN0cm9rZT0iI2Q2YjY1NiIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyIgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxMThweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAxMTVweDsgbWFyZ2luLWxlZnQ6IDFweDsiPjxkaXYgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMDsgdGV4dC1hbGlnbjogY2VudGVyOyAiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogIzAwMDAwMDsgbGluZS1oZWlnaHQ6IDEuMjsgcG9pbnRlci1ldmVudHM6IGFsbDsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgd29yZC13cmFwOiBub3JtYWw7ICI+Tm9kZTxiciBzdHlsZT0iZm9udC1zaXplOiAxMnB4IiAvPihSdW50aW1lIEhvc3QpPC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjYwIiB5PSIxMTkiIGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iMTJweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+Tm9kZS4uLjwvdGV4dD48L3N3aXRjaD48L2c+PHJlY3QgeD0iMTcwIiB5PSIyMCIgd2lkdGg9IjIxMCIgaGVpZ2h0PSIxNDAiIGZpbGw9IiNmOGNlY2MiIHN0cm9rZT0iI2I4NTQ1MCIgc3Ryb2tlLWRhc2hhcnJheT0iMyAzIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PHJlY3QgeD0iMTcwIiB5PSIwIiB3aWR0aD0iMjEwIiBoZWlnaHQ9IjIwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiIHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogMjA4cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogMTBweDsgbWFyZ2luLWxlZnQ6IDE3MXB4OyI+PGRpdiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7ICI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiAjMDAwMDAwOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyBmb250LXdlaWdodDogYm9sZDsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgd29yZC13cmFwOiBub3JtYWw7ICI+U2FuZGJveDwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIyNzUiIHk9IjE0IiBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEycHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtd2VpZ2h0PSJib2xkIj5TYW5kYm94PC90ZXh0Pjwvc3dpdGNoPjwvZz48cmVjdCB4PSIxODAiIHk9IjMwIiB3aWR0aD0iMTkwIiBoZWlnaHQ9IjMwIiBmaWxsPSIjZmZmMmNjIiBzdHJva2U9IiNkNmI2NTYiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiIHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogMTg4cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogNDVweDsgbWFyZ2luLWxlZnQ6IDE4MXB4OyI+PGRpdiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7ICI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiAjMDAwMDAwOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyB3b3JkLXdyYXA6IG5vcm1hbDsgIj5SdW50aW1lIExvYWRlcjwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIyNzUiIHk9IjQ5IiBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEycHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlJ1bnRpbWUgTG9hZGVyPC90ZXh0Pjwvc3dpdGNoPjwvZz48cmVjdCB4PSIxODAiIHk9IjgwIiB3aWR0aD0iMTkwIiBoZWlnaHQ9IjcwIiBmaWxsPSIjZTFkNWU3IiBzdHJva2U9IiM5NjczYTYiIHN0cm9rZS1kYXNoYXJyYXk9IjMgMyIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxyZWN0IHg9IjE4MCIgeT0iNjAiIHdpZHRoPSIxOTAiIGhlaWdodD0iMjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyIgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxODhweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiA3MHB4OyBtYXJnaW4tbGVmdDogMTgxcHg7Ij48ZGl2IHN0eWxlPSJib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LXNpemU6IDA7IHRleHQtYWxpZ246IGNlbnRlcjsgIj48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6IEhlbHZldGljYTsgY29sb3I6ICMwMDAwMDA7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBhbGw7IGZvbnQtd2VpZ2h0OiBib2xkOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyB3b3JkLXdyYXA6IG5vcm1hbDsgIj5JbnRlbCBTR1ggRW5jbGF2ZTwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIyNzUiIHk9Ijc0IiBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEycHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtd2VpZ2h0PSJib2xkIj5JbnRlbCBTR1ggRW5jbGF2ZTwvdGV4dD48L3N3aXRjaD48L2c+PHJlY3QgeD0iMTkwIiB5PSI5MCIgd2lkdGg9IjE3MCIgaGVpZ2h0PSI1MCIgZmlsbD0iI2RhZThmYyIgc3Ryb2tlPSIjNmM4ZWJmIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7IiBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGNlbnRlcjsgd2lkdGg6IDE2OHB4OyBoZWlnaHQ6IDFweDsgcGFkZGluZy10b3A6IDExNXB4OyBtYXJnaW4tbGVmdDogMTkxcHg7Ij48ZGl2IHN0eWxlPSJib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LXNpemU6IDA7IHRleHQtYWxpZ246IGNlbnRlcjsgIj48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6IEhlbHZldGljYTsgY29sb3I6ICMwMDAwMDA7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBhbGw7IHdoaXRlLXNwYWNlOiBub3JtYWw7IHdvcmQtd3JhcDogbm9ybWFsOyAiPlJ1bnRpbWUgQmluYXJ5PC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjI3NSIgeT0iMTE5IiBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEycHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlJ1bnRpbWUgQmluYXJ5PC90ZXh0Pjwvc3dpdGNoPjwvZz48cGF0aCBkPSJNIDEyNi4zNyAxMTUgTCAxODMuNjMgMTE1IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9InN0cm9rZSIvPjxwYXRoIGQ9Ik0gMTIxLjEyIDExNSBMIDEyOC4xMiAxMTEuNSBMIDEyNi4zNyAxMTUgTCAxMjguMTIgMTE4LjUgWiIgZmlsbD0iIzAwMDAwMCIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cGF0aCBkPSJNIDE4OC44OCAxMTUgTCAxODEuODggMTE4LjUgTCAxODMuNjMgMTE1IEwgMTgxLjg4IDExMS41IFoiIGZpbGw9IiMwMDAwMDAiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PC9nPjxzd2l0Y2g+PGcgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ii8+PGEgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwtNSkiIHhsaW5rOmhyZWY9Imh0dHBzOi8vZGVzay5kcmF3LmlvL3N1cHBvcnQvc29sdXRpb25zL2FydGljbGVzLzE2MDAwMDQyNDg3IiB0YXJnZXQ9Il9ibGFuayI+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMHB4IiB4PSI1MCUiIHk9IjEwMCUiPlZpZXdlciBkb2VzIG5vdCBzdXBwb3J0IGZ1bGwgU1ZHIDEuMTwvdGV4dD48L2E+PC9zd2l0Y2g+PC9zdmc+)

将来，这可能会扩展为支持在其自己的虚拟机中运行每个运行时以及使用其他机密计算技术。

## 运营模式

共识层服务和运行时服务之间的关系最好用一个简单的例子来描述，即创建一个 "运行时A"，并接收来自客户的交易（也可参见上图的概述）。

1. 首先需要创建运行时。除了开发将在运行时本身运行的代码之外，我们还需要指定一些与运行时操作相关的元数据，包括唯一的[运行时标识符](https://docs.oasis.io/core/runtime/identifiers)，然后[注册运行时](https://docs.oasis.io/core/consensus/services/registry#register-runtime)。
2.  我们还需要一些节点，它们将实际运行运行时可执行文件并处理来自客户端（计算节点）的任何事务。这些节点当前需要有本地可用的可执行文件，并且必须配置为计算节点。
3.  除了计算节点之外，运行时还需要存储节点来存储其状态。
4.  两种[节点都将在共识层注册](https://docs.oasis.io/core/consensus/services/registry#register-node)，宣布愿意参与Runtime A的运行。
5.  [epoch transition](https://docs.oasis.io/core/consensus/services/epochtime) [committee scheduler](https://docs.oasis.io/core/consensus/services/scheduler)之后， 服务将根据角色将注册的计算和存储节点选举到不同的委员会中。选举是根据 随机信标 提供的熵随机进行的。
6.  客户端可以通过查询共识层来提交交易，以获取给定运行时的当前执行委员会，连接到它，发布交易并等待共识层完成。为了更容易编写客户端，Oasis 节点公开了一个运行时 [client RPC API](https://docs.oasis.io/core/oasis-node/rpc)，它将所有这些功能封装在一个 [SubmitTx](https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/runtime/client/api?tab=doc#RuntimeClient.SubmitTx) `调用。
7.  事务被批处理并通过事务处理管道进行。最后，将结果保存到存储中，共识层中的 [roothash 服务](https://docs.oasis.io/core/consensus/services/roothash) 在验证计算正确执行且状态为正确地坚持。
8.  计算节点准备好接受下一批，该过程可以从第 6 步开始重复。

请注意，上面的示例描述了*happy path*，即没有失败的场景。所描述的步骤提到了诸如验证计算是否执行*正确*以及该状态*正确存储*之类的事情。共识层实际上是如何知道这一点的？

### 差异检测和解决

确保运行时计算的完整性的关键思想是带有差异检测的复制计算。这基本上意味着任何计算（例如，交易的执行）都是在多个计算节点之间复制的。它们都执行完全相同的功能并产生结果，这些结果必须全部匹配。如果它们不匹配（例如，如果甚至一个节点产生不同的结果），这将被视为一个差异。

在出现差异的情况下，必须使用一个单独的更大的计算委员会来重复计算，决定正确的结果是什么。由于所有的承诺都归于计算节点，任何产生不正确结果的节点都可能会被削减其股份，并可能被从未来的委员会中移除。

鉴于上述情况，复制运行时的另一个约束是它们必须是完全确定的，也就是说，在相同的初始状态下运行的计算，执行相同的输入（事务），必须总是产生相同的输出和新状态。如果一个运行时的执行表现出非确定性，这将表现为差异，因为节点在复制计算时将得出不同的结果。

### 计算委员会的作用和承诺

一个计算节点可以被选入一个执行者委员会，并可能具有以下角色之一。

- 主要执行者节点。在任何给定的回合中，在所有主要执行者节点中选择一个节点作为*交易调度者节点（大致相当于*块提议者*的角色）。
- 后备执行者节点。在共识层确定存在差异的情况下，备份节点可以被激活。

主要和备份执行者委员会的大小，以及其他相关参数，可以在每个运行时间的基础上进行配置。主*节点是将传入的交易批量化为块，并执行状态转换以得出新的状态根。他们以复制的方式执行，所有的主执行器节点在相同的初始状态上执行相同的输入（交易）。

执行后，他们将签署[加密承诺](https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/roothash/api/commitment?tab=doc)，指定输入、初始状态、输出和结果状态。如果计算发生在一个可信的执行环境（TEE）中，如英特尔SGX，承诺也将包括一个平台证明，证明计算发生在一个特定的TEE中。

共识层中的[roothash服务](https://docs.oasis.io/core/consensus/services/roothash)将收集承诺并验证所有节点确实计算了相同的结果。如前所述，在出现差异的情况下，它将指示被选为*后备的节点来重复计算。

### 存储收据

所有运行时的持久性状态都由存储节点存储。这些节点为计算节点提供一个[Merklized Key-Value Store (MKVS)](https://docs.oasis.io/core/mkvs)。MKVS以加密方式存储由单一根哈希总结的不可变的状态。当一个存储节点存储一个给定的状态更新时，它签署一个收据，说明它正在存储一个特定的根。在接受来自计算节点的承诺之前，这些收据由[roothash服务](https://docs.oasis.io/core/consensus/services/roothash)进行验证。

### 暂停运行时

由于定期维护工作必须在每个纪元转换时进行（例如，选举运行时委员会），该维护的费用由任何注册为特定运行时执行工作的节点支付。费用是按节点注册的纪元数预付的。如果在纪元转换时没有运行时间的委员会，那么该纪元的运行时间将被暂停。如果注册实体不再有足够的股权来支付实体和运行时间的押金，运行时间也会暂停。如果运行时间节点将被注册，并且注册实体有足够的股权，那么运行时间将在纪元转换时被恢复。

### 发出消息

运行时可以[emit messages](https://docs.oasis.io/core/runtime/messages)来指示共识层代表他们做什么。这使得运行时有可能[拥有赌注账户](https://docs.oasis.io/core/consensus/services/staking#runtime-accounts)。

[运行时主机协议](%E8%BF%90%E8%A1%8C%E6%97%B6%20e86e0999f74645d590adcded037d5e09/%E8%BF%90%E8%A1%8C%E6%97%B6%E4%B8%BB%E6%9C%BA%E5%8D%8F%E8%AE%AE%2061563b2a0b444210a0e102f4a0adb3a7.md)

[运行时 ID](%E8%BF%90%E8%A1%8C%E6%97%B6%20e86e0999f74645d590adcded037d5e09/%E8%BF%90%E8%A1%8C%E6%97%B6%20ID%2095418b07e7064a228cabd0d60693d677.md)

[运行时消息](%E8%BF%90%E8%A1%8C%E6%97%B6%20e86e0999f74645d590adcded037d5e09/%E8%BF%90%E8%A1%8C%E6%97%B6%E6%B6%88%E6%81%AF%207da059f8b58c41bf96e958f8de9d5160.md)